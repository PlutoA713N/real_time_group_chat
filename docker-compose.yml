version: '3.8'

services:
  # 🟦 Your Node.js App
  app:
    build: .                    # 🔧 Build the image from Dockerfile in the current directory
    ports:
      - '5000:5000'             # 🔁 Map container port 5000 to local machine's port 5000
    env_file:
      - .env
    environment:
      - MONGO_URI=${MONGO_URI}  # 🌐 Tell Node.js to connect to MongoDB service
      - JWT_SECRET_KEY=${JWT_SECRET_KEY}                    # 🔒 Your app’s environment variable
#    depends_on:
#      - mongo                   # 🔄 Wait for MongoDB to start before booting Node app

#  # 🍃 MongoDB Container
#  mongo:
#    image: mongo                # 🏗️ Use official MongoDB image from DockerHub
#    restart: always             # 🔁 Auto-restart MongoDB if it crashes
#    ports:
#      - '27017:27017'           # (optional) expose Mongo port to host system
#    volumes:
#      - mongo_data:/data/db     # 💾 Persist MongoDB data across container restarts
#
## 🔖 Named volume to store MongoDB data
#volumes:
#  mongo_data:
